using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class configObjects : MonoBehaviour
{
	
	int selectScene; // 3 scene 
  
	
	
	//FIRST SCENE : HANDS UP/////
	GameObject drawingun;
	GameObject man1;
	float man1_rotY; //randomize the rotation
	GameObject man1b; //randomize the person (man woman)
	GameObject hat1; //randomize the hat
	int hat1_random;

    GameObject man1leftarm; //man
    GameObject man1rightarm;
    GameObject man1bleftarm; //woman
    GameObject man1brightarm;


    Vector3 man1_pose;
    float random_velocity; //set the velocity of hands up
    
    Vector3 drawingun_pose;
	////////////////////////////



	//SECOND SCENE : MAN DOWN///
	GameObject gunplay;
	GameObject man2;
	GameObject man3;
    GameObject man3b;
	float gunplay_rotY; // passa da 90 a 30 
	///////////////////////////



    //THIRD SCENE: WAVING HANDS///
    GameObject praying;
    GameObject waving1;
    GameObject waving2;
    GameObject knife;
    GameObject knife2;
    GameObject kick;
    GameObject crouched;
    /////////////////////////


	int randomnumber;


	GameObject camera;
	//random numbers for camera transform
	float cam_posX_first;
	float cam_rotX_first;
	float cam_posX_second;
	float cam_rotX_second;
	float cam_rotY_second;
	float cam_posX_third;
	float cam_rotX_third;
	float cam_rotY_third;
    float cam_posX_fourth;
    float cam_rotX_fourth;
    float cam_rotY_fourth;
	
	int randompickCamera; //per la camera: a seconda del caso in cui sono cambia la posizione di partenza


    // Directional Light (fixed rotation) and Directional Light 2 (with random rotation)
    GameObject dirLight;
    GameObject dirLight2;
    float dl2_rotX; 
    float dl2_rotY;
	

    //main bulding
	GameObject building;
	float build_posX;
	float build_posY; //fixed
	float build_posZ;
	float build_rotY;

	GameObject building3;
	float build3_posX;
	float build3_posY; //fixed
	float build3_posZ;
	float build3_rotY;

    //side building
    GameObject building2;
    float build2_scaleX;
    float build2_scaleY;
    float build2_scaleZ;


	
	GameObject car;
	float car_posX;
	float car_posY; //fixed
	float car_posZ;
	float car_rotY;
	public Material[] mat;
	int randompickcolor;

	GameObject drone;
	float drone_posX;
	float drone_posY; //fixed
	float drone_posZ;
	float drone_rotY;
	
	GameObject woman1;
    GameObject woman2;


	GameObject tower;
	float tower_scalez;

	GameObject plant;
    GameObject wolf;
    GameObject car2;

    GameObject car3;
    GameObject boat;
    GameObject airplane;

    GameObject runaway;
    GameObject runaway2;


	
    // init the floor materials
	GameObject plane; 
	public Material[] mat_plane;
	


    // Start is called before the first frame update
    void Start()
    {
       

        selectScene = 2;		// SELECT THE SCENE = 1 2 3 
        /*if(selectScene == 1)
        Debug.Log("Hands Up scene");
        if(selectScene == 2)
        Debug.Log("Man Down scene");
        if(selectScene == 3)
        Debug.Log("Waving Hands scene");*/



    	///////////////////////////////////////////
    	//First scene: HANDS UP
    	man1 = GameObject.Find("man1");
    	man1b = GameObject.Find("man1b");
        drawingun = GameObject.Find("drawingGun");
    	man1_rotY = -90;
    	hat1 = GameObject.Find("hat1");
    	hat1_random = Random.Range(1,3);
        random_velocity = Random.Range(0.79f,1.1f);   //velocity of hands up for man1

        man1leftarm = GameObject.Find("rp_nathan_animated_003_walking_upperarm_l");
        man1rightarm = GameObject.Find("rp_nathan_animated_003_walking_upperarm_r");
        man1bleftarm = GameObject.Find("mixamorig2:LeftShoulder");
        man1brightarm = GameObject.Find("mixamorig2:RightShoulder");

       
        
    	///////////////////////////////////////////


    	///////////////////////////////////////////
    	//SECOND SCENE: MAN DOWN
    	gunplay = GameObject.Find("Gunplay");
        man2 = GameObject.Find("man2");
        man3 = GameObject.Find("man3");
        man3b = GameObject.Find("man3b");
    	///////////////////////////////////////////


        ///////////////////////////////////////////
        //THIRD SCENE: WAVING HANDS

        praying = GameObject.Find("praying");
        waving1 = GameObject.Find("waving1");
        waving2 = GameObject.Find("waving2");
        knife = GameObject.Find("knife");
        knife2 = GameObject.Find("knife2");
        kick = GameObject.Find("kick");
        crouched = GameObject.Find("crouched");


    	////////////////////////////////////////////
    	/////////RANDOM POSITION OF OBJECTS/////////
    	////////////////////////////////////////////
    	randomnumber = Random.Range(1,5);				//SET: car vs drone, plant vs tower,woman1 vs woman2,car2 vs wolf1; man1 rotation y, directional lights, man1 vs man1b

    	//set camera:
    	camera = GameObject.Find("Main Camera");
        //front
    	cam_posX_first = Random.Range(-3f,7.1f);
    	cam_rotX_first = Random.Range(-2f,10.1f);
        //right
    	cam_posX_second = Random.Range(-9f,-2.5f);
    	cam_rotX_second = Random.Range(20f,30.1f);
    	cam_rotY_second = Random.Range(80f,100.1f);
        //left
    	cam_posX_third = Random.Range(13.2f,16.5f);
    	cam_rotX_third = Random.Range(0f,10.1f);
    	cam_rotY_third = Random.Range(-115f,-95.1f);
        //back
        cam_posX_fourth = Random.Range(-0.5f, 0.1f);
        cam_rotX_fourth = Random.Range(0f, 20f);
        cam_rotY_fourth = Random.Range(-220f,-185f);

    	randompickCamera = Random.Range(0,4);	//SET THE CAMERA RANDOMIZATION: 4 pov

        //set Directional Light
        dirLight = GameObject.Find("Directional Light");
        dirLight2 = GameObject.Find("Directional Light 2");
        dl2_rotX = Random.Range(30f,60.1f);
        dl2_rotY = Random.Range(0f,60.1f);

    	//set building
        building = GameObject.Find("building");
        build_posX = Random.Range(-5f,22f);
        build_posY = 0;
        build_posZ = Random.Range(10f,13f);
    	build_rotY = Random.Range(0f,180f);

    	//set building3 
    	building3 = GameObject.Find("building3");
        build3_posX = Random.Range(-5f,6f);
        build3_posY = -40;
        build3_posZ = Random.Range(13f,15f);
    	build3_rotY = Random.Range(175f,185.1f);

        building2 = GameObject.Find("building2");
        build2_scaleX = 2;
        build2_scaleY = Random.Range(2f,3.1f);;
        build2_scaleZ= Random.Range(2f,5.1f);;

    	//set car
    	car = GameObject.Find("car");
        car_posX = Random.Range(-7f,15.1f);
        car_posY = -1;
        car_posZ = Random.Range(1f,3.1f);
    	car_rotY = Random.Range(0f,180.1f);
    	randompickcolor = Random.Range(0,4);			//SET the color for car, floor and also the main building position 

    	//set drone
    	drone = GameObject.Find("drone");
        drone_posX = Random.Range(-7f,7f);
        drone_posY = -20;
        drone_posZ = Random.Range(3f,4f);
    	drone_rotY = Random.Range(80f,101f);


    	//tower
    	tower = GameObject.Find("tower");
    	tower_scalez = Random.Range(130f,195f);

    	plant = GameObject.Find("plant");

        //woman1 2
    	woman1 = GameObject.Find("woman1");
        woman2 = GameObject.Find("woman2");

        //car2 and wolf1
        car2 = GameObject.Find("car2");
        wolf = GameObject.Find("Wolf_fbx");

        //car3 airplane boat
        car3 = GameObject.Find("car3");
        airplane = GameObject.Find("airplane");
        boat = GameObject.Find("boat");

    	//floor
    	plane = GameObject.Find("floor");
        mat_plane = plane.GetComponent<MeshRenderer>().materials;

        //runaways
        runaway = GameObject.Find("runaway");
        runaway2 = GameObject.Find("runaway2");



    	//randomize the buildings y position
    	if(randompickcolor == 0 || randompickcolor == 2){
    		build_posY -= 40;
    		build3_posY += 40;
    	}

    	//randomize the car with drone
    	//randomize man1 rotation
    	if(randomnumber == 2 || randomnumber == 4){
    		
            car.SetActive(false); //delete the car1

    		if(man1!=null){
    		//man1 transform Y at start
    		man1.transform.eulerAngles = new Vector3(0f,90f,0);
    		}

    		//plant and woman2 and the wolf1 disappear; delete also the runaway2;
    		plant.SetActive(false);
            woman2.SetActive(false);
            wolf.SetActive(false);
            runaway2.SetActive(false);
    	}
    	else{//or the tower and the woman 1 and the car2 disappear; delete also the runaway1
    		tower.SetActive(false);
            woman1.SetActive(false); 
            car2.SetActive(false);

            drone.SetActive(false); //delete the drone too
            runaway.SetActive(false);
    	}

        if(randomnumber == 2 || randomnumber == 3){
            dirLight2.SetActive(false); //delete the second directional light
            if(runaway != null){
                runaway.transform.position = new Vector3(2f,0f,-11f); //solo quando rundomnumber è 2
            }

        } 	




        ///////////////////////
        //SCENE CONFIGURATION//
        /////////////////7/////


        if(selectScene == 1){ //only man1 and drawing gun
        	//delete all the others
            Destroy(man2);
            Destroy(man3);
            Destroy(man3b);
            Destroy(gunplay);
            Destroy(praying);
            Destroy(waving1);
            Destroy(waving2);
            Destroy(knife);
            Destroy(knife2);
            Destroy(kick);
            Destroy(crouched);

            //in the first scene there is the boat
            car3.SetActive(false);
            airplane.SetActive(false);


            //swithc between male and female
            
            if(randomnumber == 1 || randomnumber == 3){
            	Destroy(man1b); 
            }else{
            	Destroy(man1);
            }
            //randomize the hat
            if(hat1_random == 1){
            	Destroy(hat1);
            	}
            
        }
        if(selectScene == 2){ //only man2 man3 and gunplay actived: delete others
            Destroy(man1);
            Destroy(drawingun);
            Destroy(man1b);
            Destroy(praying);
            Destroy(waving1);
            Destroy(waving2);
            Destroy(knife);
            Destroy(knife2);
            Destroy(kick);
            Destroy(crouched);

            //there is only the car
            airplane.SetActive(false);
            boat.SetActive(false);
            if(randomnumber == 1 || randomnumber == 3){
                Destroy(man3);
            }
            else{ 
                Destroy(man3b);
            }
        }


        if(selectScene == 3){
            Destroy(man1);
            Destroy(man1b);
            Destroy(drawingun);
            Destroy(man2);
            Destroy(man3);
            Destroy(man3b);
            Destroy(gunplay);

            //there is only the airplane
            boat.SetActive(false);
            car3.SetActive(false);

            //switch between the two waving animations and between the two bad guys
            if(randomnumber == 2 || randomnumber == 4){
                Destroy(waving2);
                Destroy(knife);
            }
            else{ 
                Destroy(waving1);
                Destroy(kick);
            }
            
        }
        
    }

    // Update is called once per frame
    void Update()
    {

 		//Debug.Log("randomnumber: " + randomnumber);  //per scrivere in console



    	///////////////////////////////////////////
    	//First scene: HANDS UP

        if(drawingun != null){
            drawingun_pose = drawingun.transform.position;
            
            //Debug.Log("position "+drawingun_pose[0]);
        
            if(drawingun_pose[0] > 0.5){

                if(man1rightarm!=null & man1leftarm!=null){

                    man1rightarm.transform.Rotate(0f,random_velocity,0f);
                    man1leftarm.transform.Rotate(0f,random_velocity,0f);
                 }

                if(man1brightarm!=null & man1bleftarm!=null){
                    man1brightarm.transform.Rotate(0f,-1,0f);
                    man1bleftarm.transform.Rotate(0f,1,0f);
                
                //da settare la y in base alla durata del frame

                }
                
            }
        }

    	/////////////////////////////////////////////
    	////// SECOND SCENE : MAN DOWN
    	if(gunplay!=null){
    	gunplay.transform.Rotate(0f, -0.15f, 0f); 
    	}
        ////////////////////////////////////////////
		
    	
		
        //////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////
    	//////////////////////////CAMERA RANDOM UPDATE////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////
    	if(randompickCamera == 0){
        	camera.transform.position = new Vector3(cam_posX_third, 3f, 5f); // genera nuova posizione: left
        	camera.transform.eulerAngles = new Vector3(cam_rotX_third, cam_rotY_third, 0f);
    	}
    	else if(randompickCamera == 1){
    		camera.transform.position = new Vector3(cam_posX_second, 6f, 0f); // genera nuova posizione: right
    		camera.transform.eulerAngles = new Vector3(cam_rotX_second, cam_rotY_second, 0f);
    	}
    	else if(randompickCamera == 2){
    		camera.transform.position = new Vector3(cam_posX_first, 2f, -10f); // genera nuova posizione: front
    		camera.transform.eulerAngles = new Vector3(cam_rotX_first, 2f, 0f);
    	}
        else if(randompickCamera == 3){
            camera.transform.position = new Vector3(cam_posX_fourth, 2f, 7f); // genera nuova posizione: back
            camera.transform.eulerAngles = new Vector3(cam_rotX_fourth, cam_rotY_fourth, 0f);
        }
    	///////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////


        //light update
        dirLight2.transform.eulerAngles = new Vector3(dl2_rotX, dl2_rotY, 0f);

    	//UPDATING OBJECTS RANDOMLY : postion, color...
    	//building update (palazzo centrale)

    	building.transform.position = new Vector3(build_posX, build_posY, build_posZ);
    	building.transform.eulerAngles = new Vector3(0, build_rotY, 0f);

    	//building3 update (palazzo centrale che lo sostituisce)
    	building3.transform.position = new Vector3(build3_posX, build3_posY, build3_posZ);
    	building3.transform.eulerAngles = new Vector3(0, build3_rotY, 0f);

        //building2 update (palazzo a sinistra)
        building2.transform.localScale = new Vector3(build2_scaleX, build2_scaleY, build2_scaleZ); 

    	
    	//drone update
    	drone.transform.position = new Vector3(drone_posX, drone_posY, drone_posZ); 
    	drone.transform.eulerAngles = new Vector3(0, drone_rotY, 0f);

    	//car update
    	car.transform.position = new Vector3(car_posX, car_posY, car_posZ); 
    	car.transform.eulerAngles = new Vector3(0, car_rotY, 0f);
    	mat = car.GetComponentInChildren<MeshRenderer>().materials;



    	//color update of car with random picking --> color floor update too only in one case
    	

    	if(randompickcolor == 0){
    	mat[7].color = Color.red; //sedili
    	mat[17].color = Color.blue; //carrozzeria blu  
    	mat_plane[0].color = new Color(205f/255f, 133f/255f, 63f/255f); //verde autunno sul beige
        

    	}
    	else if( randompickcolor == 1){
    	mat[7].color = Color.black; //sedili
    	mat[17].color = Color.red; //carrozzeria rossa
    	mat_plane[0].color = Color.green; //verde light

    	}
    	else if(randompickcolor == 2){
    	mat[7].color = Color.red; //sedili
    	mat[17].color = Color.yellow; //carrozzeria gialla
    	mat_plane[0].color = new Color(128f/255f, 128f/255f, 0f/255f);  //verde militare
    	}
    	else{
    		mat[7].color = Color.yellow; //sedili
    		mat[17].color = Color.black; //carrozzeria nera
    	}

    	//tower update
    	tower.transform.localScale = new Vector3(100f, 100f, tower_scalez); 



        
    }
}
