/* @autor: Lorenzi Flavio

C# Unity configuration objects in the scene

==============================================================================================================================
Copyrights 2019 Konica Minolta Laboratory Europe (KMLE)

All rights reserved

==============================================================================================================================

*/

using System.Collections;
using System.Collections.Generic;
using UnityEngine;


public class configObjects : MonoBehaviour
{
	
	int selectScene;
	


	
	//FIRST SCENE -> HANDS UP: the animation is not imported here
	GameObject drawingun;
	GameObject man1;
	GameObject man1b; 
	GameObject hat1;
	int hat_random;
	int weapon_random;

    GameObject man1leftarm; 
    GameObject man1rightarm;
    GameObject man1bleftarm; 
    GameObject man1brightarm;

    Vector3 man1_pose;
    float random_velocity; 
    
    Vector3 drawingun_pose;



	//SECOND SCENE -> MAN DOWN
	GameObject gunplay;
	GameObject man2;
	GameObject man3;
    GameObject man3b;
	float gunplay_rotY; //shooting rotation randomized



    //THIRD SCENE -> WAVING HANDS
    GameObject praying;
    GameObject waving1;
    GameObject waving2;
    GameObject knife;
    GameObject knife2;
    GameObject kick;
    GameObject crouched;
    



    ///////////////////////////////////////////////////
    //For each scene: importing objects and variables//
    ///////////////////////////////////////////////////
	int randomnumber;
	int randomnumber_two;

    int randompickcolor;  

    int randompickCamera;

	GameObject camera;
	//random numbers for camera transformations:
	float cam_posX_first;
	float cam_rotX_first;
	float cam_posX_second;
	float cam_rotX_second;
	float cam_rotY_second;
	float cam_posX_third;
	float cam_rotX_third;
	float cam_rotY_third;
    float cam_posX_fourth;
    float cam_rotX_fourth;
    float cam_rotY_fourth;


    //Directional Light (fixed rotation) and Directional Light 2 (with random rotation)
    GameObject dirLight;
    GameObject dirLight2;
    float dl2_rotX; 
    float dl2_rotY;
	

    // All other objects, animals, people in the scene:
	GameObject building;
	float build_posX;
	float build_posY; //fixed
	float build_posZ;
	float build_rotY;

    GameObject building2;
    float build2_scaleX;
    float build2_scaleY;
    float build2_scaleZ;

	GameObject building3;
	float build3_posX;
	float build3_posY; //fixed
	float build3_posZ;
	float build3_rotY;

	GameObject car;
	float car_posX;
	float car_posY; //fixed
	float car_posZ;
	float car_rotY;
	public Material[] mat_car;

	GameObject drone;
	float drone_posX;
	float drone_posY; //fixed
	float drone_posZ;
	float drone_rotY;
	
	GameObject woman1;
    GameObject woman2;

	GameObject tower;
	float tower_scalez;

	GameObject plant;
    GameObject wolf;
    GameObject car2;

    GameObject car3;
    GameObject boat;
    GameObject airplane;

    GameObject runaway;
    GameObject runaway2;

    GameObject bat1;
    GameObject mp5k;

    GameObject train1;
    float train_scaleX;
    float train_scaleY;
    float train_scaleZ;

    GameObject r2d2;
    GameObject bb8;
    GameObject xwing;
    GameObject playground;
    GameObject swing;
    GameObject parkbank;
    GameObject parkbank2;
    GameObject lightpole;



    // floor
	GameObject plane; 
	public Material[] mat_plane;
	




    /* Start method is called before the first frame update */
    void Start()
    {
       

        selectScene = 2;	// SELECT THE SCENE 

        /*if(selectScene == 1)
        Debug.Log("Hands Up scene");
        if(selectScene == 2)
        Debug.Log("Man Down scene");
        if(selectScene == 3)
        Debug.Log("Waving Hands scene");*/


    	
    	//First scene: HANDS UP
    	man1 = GameObject.Find("man1");
    	man1b = GameObject.Find("man1b");
        drawingun = GameObject.Find("drawingGun");
    	
    	hat1 = GameObject.Find("hat1");
    	hat_random = Random.Range(1,3);
    	weapon_random = Random.Range(1,3);
        random_velocity = Random.Range(0.79f,1.1f);   //velocity of hands up for man1

        man1leftarm = GameObject.Find("rp_nathan_animated_003_walking_upperarm_l");
        man1rightarm = GameObject.Find("rp_nathan_animated_003_walking_upperarm_r");
        man1bleftarm = GameObject.Find("mixamorig2:LeftShoulder");
        man1brightarm = GameObject.Find("mixamorig2:RightShoulder");

       

    	//SECOND SCENE: MAN DOWN
    	gunplay = GameObject.Find("Gunplay");
        man2 = GameObject.Find("man2");
        man3 = GameObject.Find("man3");
        man3b = GameObject.Find("man3b");
   


        //THIRD SCENE: WAVING HANDS
        praying = GameObject.Find("praying");
        waving1 = GameObject.Find("waving1");
        waving2 = GameObject.Find("waving2");
        knife = GameObject.Find("knife");
        knife2 = GameObject.Find("knife2");
        kick = GameObject.Find("kick");
        crouched = GameObject.Find("crouched");





    	////////////////////////////////////////////
    	/////////RANDOM POSITION OF OBJECTS/////////
    	////////////////////////////////////////////
    	randomnumber = Random.Range(1,5);     //randomize: car/drone; plant/tower; woman1/woman2; car2/wolf1; man1 rot y, dir lights; man1/man1b
    	randomnumber_two = Random.Range(1,5); //randomize: park, star wars, playground environments

        randompickcolor = Random.Range(0,4);  //randomize: car and floor colors; the main building positions 

        randompickCamera = Random.Range(0,4); //randomize 4 different views

    	camera = GameObject.Find("Main Camera");
        //front view
    	cam_posX_first = Random.Range(-3f,7.1f);
    	cam_rotX_first = Random.Range(-2f,10.1f);
        //right view
    	cam_posX_second = Random.Range(-9f,-2.5f);
    	cam_rotX_second = Random.Range(20f,30.1f);
    	cam_rotY_second = Random.Range(80f,100.1f);
        //left view
    	cam_posX_third = Random.Range(13.2f,16.5f);
    	cam_rotX_third = Random.Range(0f,10.1f);
    	cam_rotY_third = Random.Range(-115f,-95.1f);
        //back view
        cam_posX_fourth = Random.Range(-0.5f, 0.1f);
        cam_rotX_fourth = Random.Range(0f, 20f);
        cam_rotY_fourth = Random.Range(-220f,-185f);


    	
        //Set Directional Light
        dirLight = GameObject.Find("Directional Light");
        dirLight2 = GameObject.Find("Directional Light 2");
        dl2_rotX = Random.Range(30f,60.1f);
        dl2_rotY = Random.Range(0f,60.1f);

    	//Set all other objects in the scene
        building = GameObject.Find("building");
        build_posX = Random.Range(-5f,22f);
        build_posY = 0;
        build_posZ = Random.Range(10f,13f);
    	build_rotY = Random.Range(0f,180f);
    	building3 = GameObject.Find("building3");
        build3_posX = Random.Range(-5f,6f);
        build3_posY = -40;
        build3_posZ = Random.Range(13f,15f);
    	build3_rotY = Random.Range(175f,185.1f);
        building2 = GameObject.Find("building2");
        build2_scaleX = 2;
        build2_scaleY = Random.Range(2f,3.1f);
        build2_scaleZ= Random.Range(2f,5.1f);

    	car = GameObject.Find("car");
        car_posX = Random.Range(-7f,15.1f);
        car_posY = -1;
        car_posZ = Random.Range(1f,3.1f);
    	car_rotY = Random.Range(0f,180.1f);

    	drone = GameObject.Find("drone");
        drone_posX = Random.Range(-7f,7f);
        drone_posY = -20;
        drone_posZ = Random.Range(3f,4f);
    	drone_rotY = Random.Range(80f,101f);

    	tower = GameObject.Find("tower");
    	tower_scalez = Random.Range(130f,195f);
    	plant = GameObject.Find("plant");

    	woman1 = GameObject.Find("woman1");
        woman2 = GameObject.Find("woman2");

        car2 = GameObject.Find("car2");
        wolf = GameObject.Find("Wolf_fbx");

        car3 = GameObject.Find("car3");
        airplane = GameObject.Find("airplane");
        boat = GameObject.Find("boat");

        runaway = GameObject.Find("runaway");
        runaway2 = GameObject.Find("runaway2");

        train1 = GameObject.Find("train1");
        train_scaleX = 1.9f;
        train_scaleY = 1.9f;
        train_scaleZ = 3.9f;
        train1.transform.localScale = new Vector3(train_scaleX, train_scaleY, train_scaleZ);

        bat1 = GameObject.Find("bat1");
        mp5k = GameObject.Find("MP5K");

        parkbank = GameObject.Find("parkbank");
        parkbank2 = GameObject.Find("parkbank2");
        lightpole = GameObject.Find("lightpole");
        swing = GameObject.Find("swing");
        playground = GameObject.Find("playground");
        bb8 = GameObject.Find("bb-8");
        xwing = GameObject.Find("xwing");
        r2d2 = GameObject.Find("r2-d2");

    	//floor
    	plane = GameObject.Find("floor");
        mat_plane = plane.GetComponent<MeshRenderer>().materials;

       


        //APPLY RANDOMIZATIONS by random picking:

    	if(randompickcolor == 0 || randompickcolor == 2){
    		build_posY -= 40;
    		build3_posY += 40;
    	}

    	if(randomnumber == 2 || randomnumber == 4){
    		
            car.SetActive(false); //delete the car1

    		if(man1!=null){
    		
    		man1.transform.eulerAngles = new Vector3(0f,90f,0);
    		}

    		plant.SetActive(false);
            woman2.SetActive(false);
            wolf.SetActive(false);
            runaway2.SetActive(false);
    	}
    	else{
    		tower.SetActive(false);
            woman1.SetActive(false); 
            car2.SetActive(false);
            drone.SetActive(false); 
            runaway.SetActive(false);
    	}

        if(randomnumber == 2 || randomnumber == 3){
            dirLight2.SetActive(false);
            if(runaway != null){
                runaway.transform.position = new Vector3(2f,0f,-11f);
            }

        }

        if(randomnumber_two == 1){
        	Destroy(r2d2);
        	Destroy(bb8);
        	Destroy(xwing);
        	Destroy(playground);
        	Destroy(swing);
        }
        else if(randomnumber_two == 2){
        	Destroy(r2d2);
        	Destroy(bb8);
        	Destroy(xwing);
        	Destroy(parkbank);
     		Destroy(parkbank2);
     		Destroy(lightpole);
        }
        else if(randomnumber_two == 3){
        	Destroy(playground);
        	Destroy(swing);
     		Destroy(parkbank);
     		Destroy(parkbank2);
     		Destroy(lightpole);
        }
        else if(randomnumber_two == 4){
        	Destroy(r2d2);
        	Destroy(bb8);
        	Destroy(xwing);
        	Destroy(playground);
        	Destroy(swing);
        	Destroy(parkbank);
     		Destroy(parkbank2);
     		Destroy(lightpole);
        } 	







        ///////////////////////
        //SCENE CONFIGURATION//
        /////////////////7/////

        //HANDS UP: delete all but man1, man1b and drawing gun
        if(selectScene == 1){ 
            
            Destroy(man2);
            Destroy(man3);
            Destroy(man3b);
            Destroy(gunplay);
            Destroy(praying);
            Destroy(waving1);
            Destroy(waving2);
            Destroy(knife);
            Destroy(knife2);
            Destroy(kick);
            Destroy(crouched);

            car3.SetActive(false);
            airplane.SetActive(false);

            //random man
            if(randomnumber == 1 || randomnumber == 3){
            	Destroy(man1b); 
            }else{
            	Destroy(man1);
            }

            if(weapon_random == 1){
            	Destroy(mp5k);
            }
            else{
            	Destroy(bat1);
            }
            if(hat_random == 1)
            	Destroy(hat1);
            
        }

        //MAN DOWN
        if(selectScene == 2){
            Destroy(man1);
            Destroy(drawingun);
            Destroy(man1b);
            Destroy(praying);
            Destroy(waving1);
            Destroy(waving2);
            Destroy(knife);
            Destroy(knife2);
            Destroy(kick);
            Destroy(crouched);

            airplane.SetActive(false);
            boat.SetActive(false);

            if(randomnumber == 1 || randomnumber == 2){
                Destroy(man3);
                Destroy(man3b);
            }
            if(randomnumber == 3){ 
                Destroy(man3b);
                Destroy(man2);
            }
            if(randomnumber == 4){ 
                Destroy(man3);
                Destroy(man2);
            }
        }

        //WAVING HANDS
        if(selectScene == 3){
            Destroy(man1);
            Destroy(man1b);
            Destroy(drawingun);
            Destroy(man2);
            Destroy(man3);
            Destroy(man3b);
            Destroy(gunplay);

            boat.SetActive(false);
            car3.SetActive(false);

            //random animations
            if(randomnumber == 2 || randomnumber == 4){
                Destroy(waving2);
                Destroy(knife);
            }
            else{ 
                Destroy(waving1);
                Destroy(kick);
            }
            
        }
        
    }


    /* Update method is called once per frame */
    void Update()
    {

    	
    	//HANDS UP
        if(drawingun != null){
            drawingun_pose = drawingun.transform.position;
        
            if(drawingun_pose[0] > 0.5){

                if(man1rightarm!=null & man1leftarm!=null){
                    man1rightarm.transform.Rotate(0f,random_velocity,0f);
                    man1leftarm.transform.Rotate(0f,random_velocity,0f);
                 }

                if(man1brightarm!=null & man1bleftarm!=null){
                    man1brightarm.transform.Rotate(0f,-1,0f);
                    man1bleftarm.transform.Rotate(0f,1,0f);
                }         
            }
        }

    	//MAN DOWN
    	if(gunplay!=null){
    	gunplay.transform.Rotate(0f, -0.13f, 0f); 
    	}



		
        //CAMERA random update
    	if(randompickCamera == 0){
        	camera.transform.position = new Vector3(cam_posX_third, 3f, 5f); //left
        	camera.transform.eulerAngles = new Vector3(cam_rotX_third, cam_rotY_third, 0f);
    	}
    	else if(randompickCamera == 1){
    		camera.transform.position = new Vector3(cam_posX_second, 6f, 0f); //ight
    		camera.transform.eulerAngles = new Vector3(cam_rotX_second, cam_rotY_second, 0f);
    	}
    	else if(randompickCamera == 2){
    		camera.transform.position = new Vector3(cam_posX_first, 2f, -10f); //front
    		camera.transform.eulerAngles = new Vector3(cam_rotX_first, 2f, 0f);
    	}
        else if(randompickCamera == 3){
            camera.transform.position = new Vector3(cam_posX_fourth, 2f, 7f); //back
            camera.transform.eulerAngles = new Vector3(cam_rotX_fourth, cam_rotY_fourth, 0f);
        }
    	




        //Update position, rotation and scale of scene objects
        dirLight2.transform.eulerAngles = new Vector3(dl2_rotX, dl2_rotY, 0f);

    	building.transform.position = new Vector3(build_posX, build_posY, build_posZ);
    	building.transform.eulerAngles = new Vector3(0, build_rotY, 0f);

    	building3.transform.position = new Vector3(build3_posX, build3_posY, build3_posZ);
    	building3.transform.eulerAngles = new Vector3(0, build3_rotY, 0f);

        building2.transform.localScale = new Vector3(build2_scaleX, build2_scaleY, build2_scaleZ); 
    	
    	drone.transform.position = new Vector3(drone_posX, drone_posY, drone_posZ); 
    	drone.transform.eulerAngles = new Vector3(0, drone_rotY, 0f);

        tower.transform.localScale = new Vector3(100f, 100f, tower_scalez); 

    	car.transform.position = new Vector3(car_posX, car_posY, car_posZ); 
    	car.transform.eulerAngles = new Vector3(0, car_rotY, 0f);
    	mat_car = car.GetComponentInChildren<MeshRenderer>().materials;

        if(train1 != null){
        	train1.transform.Translate(-0.09f, 0f, 0.09f);
        	train_scaleX += 0.2f;
        	train_scaleY += 0.2f;
        	train_scaleZ += 0.2f;
        }

        
        //Color car and floor randomization
    	if(randompickcolor == 0){
    	mat_car[7].color = Color.red; //seats
    	mat_car[17].color = Color.blue; //body 
    	mat_plane[0].color = new Color(205f/255f, 133f/255f, 63f/255f); //beige
        

    	}
    	else if( randompickcolor == 1){
    	mat_car[7].color = Color.black;
    	mat_car[17].color = Color.red; 
    	mat_plane[0].color = Color.green; //light green

    	}
    	else if(randompickcolor == 2){
    	mat_car[7].color = Color.red;
    	mat_car[17].color = Color.yellow;
    	mat_plane[0].color = new Color(128f/255f, 128f/255f, 0f/255f);  //dark green
    	}
    	else{
    		mat_car[7].color = Color.yellow; 
    		mat_car[17].color = Color.black;
    	}

    }
}
