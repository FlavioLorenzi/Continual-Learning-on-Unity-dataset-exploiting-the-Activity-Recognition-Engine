using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class configObjects : MonoBehaviour
{
	
	int randomScene; // 3 scene 
	
	
	//FIRST SCENE : HANDS UP/////
	GameObject drawingun;
	GameObject man1;
	float man1_rotY;
	////////////////////////////

	//SECOND SCENE : MAN DOWN///
	GameObject gunplay;
	GameObject man2;
	GameObject man3;
	float gunplay_rotY; // passa da 90 a 30 
	///////////////////////////



	int randomnumber;


	GameObject camera;
	//random numbers for camera transform
	float cam_posX_first;
	float cam_rotX_first;
	float cam_posX_second;
	float cam_rotX_second;
	float cam_rotY_second;
	float cam_posX_third;
	float cam_rotX_third;
	float cam_rotY_third;
	
	int randompickCamera; //per la camera: a seconda del caso in cui sono cambia la posizione di partenza


    // Directional Light (fixed rotation) and Directional Light 2 (with random rotation)
    GameObject dirLight;
    GameObject dirLight2;
    float dl2_rotX; 
    float dl2_rotY;
	

    //main bulding
	GameObject building;
	float build_posX;
	float build_posY; //fixed
	float build_posZ;
	float build_rotY;

	GameObject building3;
	float build3_posX;
	float build3_posY; //fixed
	float build3_posZ;
	float build3_rotY;

    //side building
    GameObject building2;
    float build2_scaleX;
    float build2_scaleY;
    float build2_scaleZ;


	
	GameObject car;
	float car_posX;
	float car_posY; //fixed
	float car_posZ;
	float car_rotY;
	public Material[] mat;
	int randompickcolor;

	GameObject drone;
	float drone_posX;
	float drone_posY; //fixed
	float drone_posZ;
	float drone_rotY;
	
	


	GameObject tower;
	float tower_scalez;

	GameObject ironman;


	

	GameObject plane;
	public Material[] mat_plane;
	


    // Start is called before the first frame update
    void Start()
    {

        randomScene = Random.Range(1,3);



    	///////////////////////////////////////////
    	//First scene: HANDS UP
    	man1 = GameObject.Find("man1");
        drawingun = GameObject.Find("drawingGun");
    	man1_rotY = -90;
    	///////////////////////////////////////////


    	///////////////////////////////////////////
    	//SECOND SCENE: MAN DOWN
    	gunplay = GameObject.Find("Gunplay");
        man2 = GameObject.Find("man2");
        man3 = GameObject.Find("man3");
    	///////////////////////////////////////////







    	////////////////////////////////////////////
    	/////////RANDOM POSITION OF OBJECTS/////////
    	////////////////////////////////////////////
    	randomnumber = Random.Range(1,5);

    	//set camera
    	camera = GameObject.Find("Main Camera");
    	cam_posX_first = Random.Range(-3f,7.1f);
    	cam_rotX_first = Random.Range(-2f,10.1f);
    	cam_posX_second = Random.Range(-9f,1.1f);
    	cam_rotX_second = Random.Range(20f,30.1f);
    	cam_rotY_second = Random.Range(80f,100.1f);
    	cam_posX_third = Random.Range(14f,17.1f);
    	cam_rotX_third = Random.Range(0f,10.1f);
    	cam_rotY_third = Random.Range(-115f,-95.1f);

    	randompickCamera = Random.Range(0,4);

        //set Directional Light
        dirLight = GameObject.Find("Directional Light");
        dirLight2 = GameObject.Find("Directional Light 2");
        dl2_rotX = Random.Range(30f,60.1f);
        dl2_rotY = Random.Range(0f,60.1f);

    	//set building
        building = GameObject.Find("building");
        build_posX = Random.Range(-5f,22f);
        build_posY = 0;
        build_posZ = Random.Range(10f,13f);
    	build_rotY = Random.Range(0f,180f);

    	//set building3 
    	building3 = GameObject.Find("building3");
        build3_posX = Random.Range(-5f,6f);
        build3_posY = -40;
        build3_posZ = Random.Range(13f,15f);
    	build3_rotY = Random.Range(175f,185.1f);

        building2 = GameObject.Find("building2");
        build2_scaleX = 2;
        build2_scaleY = Random.Range(2f,3.1f);;
        build2_scaleZ= Random.Range(2f,5.1f);;

    	//set car
    	car = GameObject.Find("car");
        car_posX = Random.Range(-7f,15.1f);
        car_posY = -1;
        car_posZ = Random.Range(1f,3.1f);
    	car_rotY = Random.Range(0f,180.1f);
    	randompickcolor = Random.Range(0,4);

    	//set drone
    	drone = GameObject.Find("drone");
        drone_posX = Random.Range(-7f,7f);
        drone_posY = -20;
        drone_posZ = Random.Range(3f,4f);
    	drone_rotY = Random.Range(80f,101f);


    	//tower
    	tower = GameObject.Find("tower");
    	tower_scalez = Random.Range(130f,195f);

    	ironman = GameObject.Find("ironMan");


    	


    	//floor
    	plane = GameObject.Find("floor");
        mat_plane = plane.GetComponent<MeshRenderer>().materials;



    	//randomize the buildings y position
    	if(randompickcolor == 0 || randompickcolor == 2){
    		build_posY -= 40;
    		build3_posY += 40;
    	}

    	//randomize the car with drone
    	//randomize man1 rotation
    	if(randomnumber == 2 || randomnumber == 4){
    		car_posY -= 20;
    		drone_posY += 20;

    		if(man1!=null){
    		//man1 transform Y at start
    		man1.transform.eulerAngles = new Vector3(0f,90f,0);
    		}

    		//ironman disappears
    		ironman.SetActive(false);
    	}
    	else{//and the tower disappears
    		tower.SetActive(false);
    	}

        if(randomnumber == 1 || randomnumber == 2){
            dirLight2.SetActive(false); //delete the second directional light
        } 	

        //SCENE CONFIGURATION

        if(randomScene == 1){ //only man1 and drawing gun: delete all the others
            Destroy(man2);
            Destroy(man3);
            Destroy(gunplay);
            
        }
        if(randomScene == 2){ //only man2 man3 and gunplay actived: delete others
            Destroy(man1);
            Destroy(drawingun);
        }

    }

    // Update is called once per frame
    void Update()
    {
    	//Help functions//
 		//Debug.Log("Text: " + randompickCamera);  //per scrivere in console
        //camera.transform.Translate (0.05f, 0f, 0f); //trasla nel tempo la posizione di ()

        //IDEA TODO
		//mettere tutti gli omini tipo con y alta cosi da non essere mai inquadrati
		//e randomizzare la y in un range visivo solo per certe condizioni		--> problema: le x e le y sono tracciate lo stesso (confusione)
		//oppure: metterli tutti attivi e a seconda della scena ABC deattivarli
		//Xes:
		//randompickA: prima scena:  man1 e drawing gun (hands up);				--> problema: le label restano nonostante deattivi l'oggetto 
		//randompickB: seconda scena: man2 e man3 che cadono, mentre altri corrono;
		//randompickC: terza scena: man4 accucciato con rapinatore gun che ha sparato;
		//NB. IN OGNI SCENA POSIZIONI OGGETTI, TEXTURE ECC SONO RANDOMIZZATE

    	// if first scene
    	//to delete objects
		//man1.SetActive(false); 
		// delete questo ecc

		// if second scene

		// if terza scene ecc
 		
    	Debug.Log("Scene number: " + randomScene);






    	///////////////////////////////////////////
    	//First scene: HANDS UP
    	//

    	////// SECOND SCENE : MAN DOWN
    	if(gunplay!=null){
    	gunplay.transform.Rotate(0f, -0.15f, 0f); 
    	}

		
    	
		


    	////CAMERA RANDOM UPDATE//////////////////////////////////////////////////////////////
    	if(randompickCamera == 0){
    	camera.transform.position = new Vector3(cam_posX_third, 3f, 5f); // genera nuova posizione
    	camera.transform.eulerAngles = new Vector3(cam_rotX_third, cam_rotY_third, 0f);
    	
    	}
    	else if(randompickCamera == 1){
    		camera.transform.position = new Vector3(cam_posX_second, 6f, 0f); // genera nuova posizione
    		camera.transform.eulerAngles = new Vector3(cam_rotX_second, cam_rotY_second, 0f);
    	}
    	else {
    		camera.transform.position = new Vector3(cam_posX_first, 2f, -10f); // genera nuova posizione
    		camera.transform.eulerAngles = new Vector3(cam_rotX_first, 2f, 0f);
    	}
    	///////////////////////////////////////////////////////////////////////////////////////


        //light update
        dirLight2.transform.eulerAngles = new Vector3(dl2_rotX, dl2_rotY, 0f);


    	//UPDATING OBJECTS RANDOMLY : postion, color...
    	//building update (palazzo centrale)

    	building.transform.position = new Vector3(build_posX, build_posY, build_posZ);
    	building.transform.eulerAngles = new Vector3(0, build_rotY, 0f);

    	//building3 update (palazzo centrale che lo sostituisce)
    	building3.transform.position = new Vector3(build3_posX, build3_posY, build3_posZ);
    	building3.transform.eulerAngles = new Vector3(0, build3_rotY, 0f);

        //building2 update (palazzo a sinistra)
        building2.transform.localScale = new Vector3(build2_scaleX, build2_scaleY, build2_scaleZ); 

    	
    	//drone update
    	drone.transform.position = new Vector3(drone_posX, drone_posY, drone_posZ); 
    	drone.transform.eulerAngles = new Vector3(0, drone_rotY, 0f);

    	//car update
    	car.transform.position = new Vector3(car_posX, car_posY, car_posZ); 
    	car.transform.eulerAngles = new Vector3(0, car_rotY, 0f);
    	mat = car.GetComponentInChildren<MeshRenderer>().materials;



    	//color update of car with random picking --> color floor update too only in one case
    	

    	if(randompickcolor == 0){
    	mat[7].color = Color.red; //sedili
    	mat[17].color = Color.blue; //carrozzeria blu  
    	mat_plane[0].color = new Color(205f/255f, 133f/255f, 63f/255f); //verde autunno sul beige
        

    	}
    	else if( randompickcolor == 1){
    	mat[7].color = Color.black; //sedili
    	mat[17].color = Color.red; //carrozzeria rossa
    	mat_plane[0].color = Color.green; //verde light

    	}
    	else if(randompickcolor == 2){
    	mat[7].color = Color.red; //sedili
    	mat[17].color = Color.yellow; //carrozzeria gialla
    	mat_plane[0].color = new Color(128f/255f, 128f/255f, 0f/255f);  //verde militare
    	}
    	else{
    		mat[7].color = Color.yellow; //sedili
    		mat[17].color = Color.black; //carrozzeria nera
    	}

    	//tower update
    	tower.transform.localScale = new Vector3(100f, 100f, tower_scalez); 



        
    }
}
